{"paragraphs":[{"text":"%md\n# About\n**Lab:** Hive Clean Up\n**Objective:** Clean up database and HDFS after or before a class\n\n---","user":"sysadmin","dateUpdated":"2020-05-21T23:26:58+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{"HOME":""},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>About</h1>\n<p><strong>Lab:</strong> Hive Clean Up\n<br  /><strong>Objective:</strong> Clean up database and HDFS after or before a class</p>\n<hr />\n"}]},"apps":[],"jobName":"paragraph_1590103618090_-917956317","id":"20181126-092644_1457476546","dateCreated":"2020-05-21T23:26:58+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:48140"},{"text":"%md\n# Setup","user":"sysadmin","dateUpdated":"2020-05-21T23:26:58+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Setup</h1>\n"}]},"apps":[],"jobName":"paragraph_1590103618091_-899176992","id":"20181201-044336_178705192","dateCreated":"2020-05-21T23:26:58+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:48141"},{"title":"Show databases","text":"%jdbc(hive)\nSHOW DATABASES;\n","user":"sysadmin","dateUpdated":"2020-05-30T17:35:26+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"database_name":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"database_name\n"}]},"apps":[],"jobName":"paragraph_1590103618091_-38552992","id":"20200214-030049_1560217898","dateCreated":"2020-05-21T23:26:58+0000","dateStarted":"2020-05-30T17:35:26+0000","dateFinished":"2020-05-30T17:35:32+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:48142"},{"title":"Drop all managed databases","text":"%jdbc(hive)\nDROP DATABASE IF EXISTS cloudair CASCADE;\n\nDROP DATABASE IF EXISTS movies CASCADE;\n","user":"sysadmin","dateUpdated":"2020-05-22T18:38:06+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590103618091_2107671586","id":"20200214-024819_1212795271","dateCreated":"2020-05-21T23:26:58+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:48143"},{"title":"Validate drop of Databases","text":"%jdbc(hive)\nSHOW DATABASES;\n","user":"sysadmin","dateUpdated":"2020-05-21T23:26:58+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"database_name":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590103618092_416595162","id":"20200214-030315_579631258","dateCreated":"2020-05-21T23:26:58+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:48144"},{"title":"Show all tables in default","text":"%jdbc(hive)\nUSE default;\n\nSHOW TABLES;","user":"sysadmin","dateUpdated":"2020-05-22T18:38:17+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"tab_name":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}},"1":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"tab_name":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590103618092_1564426320","id":"20200214-030421_1621512230","dateCreated":"2020-05-21T23:26:58+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:48145"},{"title":"Drop tables in default","text":"%jdbc(hive)\nDROP TABLE IF EXISTS dc_comics;\nDROP TABLE IF EXISTS dc_comics_acid;\nDROP TABLE IF EXISTS dc_comics_acid_insert;\nDROP TABLE IF EXISTS dc_comics_parquet;\nDROP TABLE IF EXISTS dc_comics_stage;\nDROP TABLE IF EXISTS sample_table;","user":"sysadmin","dateUpdated":"2020-05-21T23:26:58+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590103618092_1745612912","id":"20200214-025331_1929435990","dateCreated":"2020-05-21T23:26:58+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:48146"},{"title":"Validate drop of default tables","text":"%jdbc(hive)\nSHOW TABLES;\n","user":"sysadmin","dateUpdated":"2020-05-21T23:26:58+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"tab_name":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590103618092_1980719926","id":"20200214-030750_892391981","dateCreated":"2020-05-21T23:26:58+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:48147"},{"title":"Use HDFS to list external tables in /warehouse/tablespace/external/hive","text":"%sh\nhdfs dfs -ls /warehouse/tablespace/external/hive\n","user":"sysadmin","dateUpdated":"2020-05-21T23:26:58+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590103618092_-309434595","id":"20200214-031413_504711676","dateCreated":"2020-05-21T23:26:58+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:48148"},{"title":"Delete external tables in Zeppelin","text":"%sh\nsudo -u hive hdfs dfs -rm -r -skipTrash /warehouse/tablespace/external/hive/cloudair.db\nsudo -u hive hdfs dfs -rm -r -skipTrash /warehouse/tablespace/external/hive/dc_comics_stage\nsudo -u hive hdfs dfs -rm -r -skipTrash /warehouse/tablespace/external/hive/marvel_comics_stage\nsudo -u hive hdfs dfs -rm -r -skipTrash /warehouse/tablespace/external/hive/movie_crew_info_partition\nsudo -u hive hdfs dfs -rm -r -skipTrash /warehouse/tablespace/external/hive/movie_crew_info_stage\nsudo -u hive hdfs dfs -rm -r -skipTrash /warehouse/tablespace/external/hive/movie_crew_stage\nsudo -u hive hdfs dfs -rm -r -skipTrash /warehouse/tablespace/external/hive/movie_title_partition\nsudo -u hive hdfs dfs -rm -r -skipTrash /warehouse/tablespace/external/hive/movie_title_stage\nsudo -u hive hdfs dfs -rm -r -skipTrash /warehouse/tablespace/external/hive/movies.db\nsudo -u hive hdfs dfs -rm -r -skipTrash /warehouse/tablespace/external/hive/ratings_stage\n","user":"sysadmin","dateUpdated":"2020-05-21T23:26:58+0000","config":{"tableHide":false,"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590103618093_1604336092","id":"20190605-071552_922371665","dateCreated":"2020-05-21T23:26:58+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:48149"},{"title":"Validate delete of external tables in HDFS","text":"%sh\nhdfs dfs -ls /warehouse/tablespace/external/hive","user":"sysadmin","dateUpdated":"2020-05-21T23:26:58+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590103618093_1872354502","id":"20200214-031442_316638712","dateCreated":"2020-05-21T23:26:58+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:48150"},{"text":"%md\n# Result\n**You have now:** You have now successfully cleaned up all databases, tables and HDFS.\n\n---","user":"sysadmin","dateUpdated":"2020-05-21T23:26:58+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Result</h1>\n<p><strong>You have now:</strong> You have now successfully cleaned up all databases, tables and HDFS.</p>\n<hr />\n"}]},"apps":[],"jobName":"paragraph_1590103618093_-668106394","id":"20181126-133507_1472573213","dateCreated":"2020-05-21T23:26:58+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:48151"},{"text":"%md\nWe hope you've enjoyed this lab. Below are additional resources that you should find useful:\n\n1. [Cloudera Apache Spark Tutorials](http://hortonworks.com/tutorials/#tuts-developers) are your natural next step where you can explore Spark in more depth.\n2. [Cloudera Community Connection (HCC)](https://community.hortonworks.com/spaces/85/data-science.html?type=question) is a great resource for questions and answers on Spark, Data Analytics/Science, and many more Big Data topics.\n3. [Cloudera Apache Spark Docs](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/spark-overview/content/analyzing_data_with_apache_spark.html) - official Spark documentation.\n4. [Cloudera Apache Zeppelin Docs](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/zeppelin-overview/content/overview.html) - official Zeppelin documentation.\n","user":"sysadmin","dateUpdated":"2020-05-21T23:26:58+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":10,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>We hope you've enjoyed this lab. Below are additional resources that you should find useful:</p>\n<ol>\n<li><a href=\"http://hortonworks.com/tutorials/#tuts-developers\">Cloudera Apache Spark Tutorials</a> are your natural next step where you can explore Spark in more depth.</li>\n<li><a href=\"https://community.hortonworks.com/spaces/85/data-science.html?type=question\">Cloudera Community Connection (HCC)</a> is a great resource for questions and answers on Spark, Data Analytics/Science, and many more Big Data topics.</li>\n<li><a href=\"https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/spark-overview/content/analyzing_data_with_apache_spark.html\">Cloudera Apache Spark Docs</a> - official Spark documentation.</li>\n<li><a href=\"https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/zeppelin-overview/content/overview.html\">Cloudera Apache Zeppelin Docs</a> - official Zeppelin documentation.</li>\n</ol>\n"}]},"apps":[],"jobName":"paragraph_1590103618093_1538163851","id":"20181126-133017_244739700","dateCreated":"2020-05-21T23:26:58+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:48152"},{"text":"%md\n","user":"sysadmin","dateUpdated":"2020-05-21T23:26:58+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590103618093_1405169163","id":"20191112-174439_1869237687","dateCreated":"2020-05-21T23:26:58+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:48153"}],"name":"Hive/11-CleanUp","id":"2F9JXA8G4","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"sh:shared_process":[],"jdbc:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}