{"paragraphs":[{"text":"%md\n# About\n**Lab:** Writing, Configuring, and Running a Spark Application\n**Objective:** Write your own Spark application instead of usng the interactive Spark shell application.\n**File locations:**\n    Hive Tables: telco.accounts\n    Scala project: /home/devuser/bin/devsh/exercises/spark-application/accounts-by-state_project/\n    Scala classes: stubs.AccountsByState\n                   solution.AccountsByState    \n**Successful outcome:** \n**Before you begin:** \n**Related lessons:** \n\n---","user":"sysadmin","dateUpdated":"2020-06-04T19:13:11+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>About</h1>\n<p><strong>Lab:</strong> Writing, Configuring, and Running a Spark Application\n<br  /><strong>Objective:</strong> Write your own Spark application instead of usng the interactive Spark shell application.\n<br  /><strong>File locations:</strong></p>\n<pre><code>Hive Tables: devsh.accounts\nScala project: $DEVSH/exercises/spark-application/accounts-by-state_project\nScala classes: stubs.AccountsByState\n               solution.AccountsByState\nPython stub: accounts-by-state.py\n</code></pre>\n<p><strong>Successful outcome:</strong>\n<br  /><strong>Before you begin:</strong>\n<br  /><strong>Related lessons:</strong></p>\n<hr />\n"}]},"apps":[],"jobName":"paragraph_1591297824722_2026480074","id":"20181126-092644_1457476546","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:280316"},{"text":"%md\n# Setup\n\nThe Spark application will take a single argument -- a state code (such as `CA`). The program should read the data from the telco.accounts Hive table and save the rows whose state column value matches the specified state code. Write the results to `/user/zeppelin/accounts_by_state/`*state-code* (such as `accounts_by_state/CA`).","user":"sysadmin","dateUpdated":"2020-06-04T19:10:24+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Setup</h1>\n<p>The Spark application will take a single argument &ndash; a state code (such as <code>CA</code>). The\n<br  />program should read the data from the devsh.accounts Hive table and save\n<br  />the rows whose state column value matches the specified state code. Write the\n<br  />results to <code>/devsh_loudacre/accounts_by_state/</code><em>state-code</em> (such as\n<br  /><code>accounts_by_state/CA</code>).</p>\n<p>Depending on which programming language you are using, follow the appropriate set of\n<br  />instructions below to write a Spark program.</p>\n<p><strong>Important:</strong> This exercise depends on <strong><em> ***Insert previous exercise title here (with link?)*** </em></strong>. If you did not complete that exercise, run the course catch-up script and advance to the current exercise:</p>\n<pre><code>$ $DEVSH/scripts/catchup.sh\n</code></pre>\n<h3>Editing Scala and Python Files</h3>\n<blockquote><p>You may use any text editor you wish to work on your application\n<br  />code. If you do not have an editor preference, you may wish to\n<br  />use Pluma, which includes language-specific support for Scala and\n<br  />Python.\n<br  />You can start Pluma on your remote desktop using the editor icon\n<br  />on the remote desktop menu bar.</p>\n</blockquote>\n"}]},"apps":[],"jobName":"paragraph_1591297824723_-442383107","id":"20181201-044336_178705192","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280317"},{"text":"%md\n# Lab\n","user":"sysadmin","dateUpdated":"2020-06-04T19:10:24+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Lab</h1>\n"}]},"apps":[],"jobName":"paragraph_1591297824724_-1791202394","id":"20181126-093358_358613711","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280318"},{"text":"%md\n### Write and Run a Spark Application in Scala\n\nA Maven project to get you started has been provided in the exercise directory: `/home/devuser/bin/devsh/exercises/spark-application/accounts-by-state_project/`.\n\nThe first time you build a Scala Spark application in your environment, Maven must first download the Spark libraries from the Maven central repository. This can take several minutes, so before starting work on the exercise steps, compile the exercise project following the steps below. (Maven only needs to download the libraries the first time. It caches the libraries locally, and uses the cache for subsequent builds.)","user":"sysadmin","dateUpdated":"2020-06-04T20:07:22+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Write and Run a Spark Application in Scala</h3>\n<p>A Maven project to get you started has been provided in the exercise directory:\n<br  /><code>/home/devuser/bin/devsh/exercises/spark-application/accounts-by-state_project/</code>.</p>\n<p>The first time you build a Scala Spark application in your environment, Maven must first download the Spark libraries from the Maven central repository. This can take several minutes, so before starting work on the exercise steps, compile the exercise project following the steps below. (Maven only needs to download the libraries the first time. It caches the libraries locally, and uses the cache for subsequent builds.)</p>\n"}]},"apps":[],"jobName":"paragraph_1591297824725_917205117","id":"20200425-221329_1276776329","dateCreated":"2020-06-04T19:10:24+0000","dateStarted":"2020-06-04T20:07:07+0000","dateFinished":"2020-06-04T20:07:07+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:280319"},{"title":"1 - Change to the project directory","text":"%sh\ncd /home/devuser/bin/devsh/exercises/spark-application/accounts-by-state_project/\nls","user":"sysadmin","dateUpdated":"2020-06-04T20:28:05+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/sh","title":true,"editorHide":false,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"bonus\nsolution\nstubs\n"}]},"apps":[],"jobName":"paragraph_1591300923625_1508405624","id":"20200604-200203_977948951","dateCreated":"2020-06-04T20:02:03+0000","dateStarted":"2020-06-04T20:03:16+0000","dateFinished":"2020-06-04T20:03:16+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:280320"},{"title":"2 - Build the exercise project using Maven","text":"%md\nBuild the exercise project.\nMaven will begin to download the required Spark libraries. Next time you build the project, Maven will used the libraries in its local cache. While Maven downloads the libraries, continue with the exercise steps below.","user":"sysadmin","dateUpdated":"2020-06-04T20:28:11+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591301145228_1531189461","id":"20200604-200545_721924825","dateCreated":"2020-06-04T20:05:45+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:280321"},{"text":"%sh\nmvn package","user":"sysadmin","dateUpdated":"2020-06-04T20:07:31+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/sh"},"settings":{"params":{},"forms":{}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"bash: mvn: command not found\n"},{"type":"TEXT","data":"ExitValue: 127"}]},"apps":[],"jobName":"paragraph_1591301242245_-386110149","id":"20200604-200722_160584057","dateCreated":"2020-06-04T20:07:22+0000","dateStarted":"2020-06-04T20:07:31+0000","dateFinished":"2020-06-04T20:07:31+0000","status":"ERROR","progressUpdateIntervalMs":500,"$$hashKey":"object:280322"},{"title":"3 - Edit the AccountsByState class","text":"%md\nEdit the Scala class defined in stubs package in `src/main/scala/stubs/AccountsByState.scala`.","user":"sysadmin","dateUpdated":"2020-06-04T20:28:38+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591302044963_-1805524579","id":"20200604-202044_322863126","dateCreated":"2020-06-04T20:20:44+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:280323"},{"title":"4 - Create a SparkSession object using the following code:","text":"%md\n```\nval spark = Sparksession.builder.getOrCreate()\n```","user":"sysadmin","dateUpdated":"2020-06-04T20:32:32+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591302518797_-437684387","id":"20200604-202838_685530877","dateCreated":"2020-06-04T20:28:38+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:280324"},{"title":"5 - Reduce distracting output","text":"%md\nOptional: Change the application log level from `INFO` (the default) to `WARN` to reduce distracting output.\n\n```\nspark.sparkContext.setLogLevel(\"WARN\")\n```","user":"sysadmin","dateUpdated":"2020-06-04T20:31:52+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591302582153_887302815","id":"20200604-202942_906227393","dateCreated":"2020-06-04T20:29:42+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:280325"},{"title":"6 - Load the accounts table and select accounts where the state matches the argument provided","text":"%md\nIn the body of the program, load the `accounts` Hive table into a DataFrame. Select accounts where the state column value matches the string provided as the first argument to the application. Save the results to a Parquet file called `/user/zeppelin/accounts_by_state/`*state-code* (where *state-code* is a string such as CA). Use overwrite mode when saving the file so that you can re-run the application without needing to delete the save directory.","user":"sysadmin","dateUpdated":"2020-06-04T21:03:58+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591302630019_-360534169","id":"20200604-203030_1240546218","dateCreated":"2020-06-04T20:30:30+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:280326"},{"title":"7 - Stopping the Spark session","text":"%md\nAt the end of the application, be sure to stop the Spark session:\n\n```\nspark.stop\n```","user":"sysadmin","dateUpdated":"2020-06-04T20:33:21+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591302752962_-796065502","id":"20200604-203232_1699484331","dateCreated":"2020-06-04T20:32:32+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:280327"},{"title":"8 - Run Maven locally to cache Spark libraries","text":"%md\nReturn to the terminal in which you ran Maven earlier in order to cache Spark libraries locally.\nIf the Maven command is still running, wait for it to finish. When it finishes, rebuild the project, this time including the code you added above. This time, the Maven command should take much less time.\n\nIf the build is successful, Maven will generate a JAR file called accounts-bystate-1.0.jar in the target directory.","user":"sysadmin","dateUpdated":"2020-06-04T20:34:00+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591302813735_1352876728","id":"20200604-203333_791997599","dateCreated":"2020-06-04T20:33:33+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:280328"},{"text":"%sh\nmvn package","user":"sysadmin","dateUpdated":"2020-06-04T20:34:30+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/sh"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591302850191_-1007956070","id":"20200604-203410_128171534","dateCreated":"2020-06-04T20:34:10+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:280329"},{"title":"9 - If you have a Spark shell running in any terminal, exit the shell before running your application","text":"","user":"sysadmin","dateUpdated":"2020-06-04T20:35:16+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591302873961_897556317","id":"20200604-203433_221361777","dateCreated":"2020-06-04T20:34:33+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:280330"},{"title":"10 - Run your application","text":"%md\nRun the program in the compiled JAR file, passing the state code to select.\nFor example, to select accounts in California, use the following command:\n\n    $ spark-submit --class stubs.AccountsByState target/accounts-by-state-1.0.jar CA\n\n**Note:** To run the solution application, use `--class solution.AccountsByState`.","user":"sysadmin","dateUpdated":"2020-06-04T20:38:13+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>In a terminal window, change to the exercise working\n<br  />directory, then run the program, passing the state code to select. For example, to\n<br  />select accounts in California, use the following command:</p>\n<pre><code>$ cd $DEVSH/exercises/spark-application/\n$ spark-submit python-stubs/accounts-by-state.py CA\n</code></pre>\n<p><strong>Note:</strong> To run the solution application, use python-solution/accounts-bystate.py.</p>\n"}]},"apps":[],"jobName":"paragraph_1591297824726_1291473093","id":"20200425-221403_1751053593","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280331"},{"text":"%sh\nspark-submit --class stubs.AccountsByState target/accounts-by-state-1.0.jar CA\n\n# Solution\n#spark-submit --class solution.AccountsByState target/accounts-by-state-1.0.jar CA","user":"sysadmin","dateUpdated":"2020-06-04T20:38:06+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"accounts-by-state_project\npython-bonus\npython-solution\npython-stubs\nrun-pyspark.sh\nrun-scala.sh\n"}]},"apps":[],"jobName":"paragraph_1591297824727_782690049","id":"20200429-181143_389236631","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280332"},{"title":"11 - Verify the data was saved correctly and use parquet-tools to verify the contents","text":"%md\nAfter the program completes, confirm the files were saved, then use `parquet-tools` to verify that the file contents are correct.","user":"sysadmin","dateUpdated":"2020-06-04T20:38:25+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824727_-1245742747","id":"20200425-221403_1016428143","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280333"},{"text":"%sh\n","user":"sysadmin","dateUpdated":"2020-06-04T19:10:24+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824728_-750380734","id":"20200601-173820_983684384","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280334"},{"text":"%md\n### View the Spark Application UI\nIn the previous section, you ran a Python Spark application using `spark-submit`. Now view that application's Spark UI (or history server UI if the application is complete).","user":"sysadmin","dateUpdated":"2020-06-04T19:10:24+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>View the Spark Application UI</h3>\n<p>In the previous section, you ran a Python Spark application using <code>spark-submit</code>. Now view that application's Spark UI (or history server UI if the application is complete).</p>\n"}]},"apps":[],"jobName":"paragraph_1591297824729_432726287","id":"20200425-223045_605713232","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280335"},{"title":"12 - Visit the YARN Resource Manager UI","text":"%md\nOpen the web browser on your remote desktop and visit the YARN Resource Manager UI.\n\nTo view the Spark Application UI if your application is still running, select the **ApplicationMaster** link. To view the History Service UI if your application has completed, select the **History** link.","user":"sysadmin","dateUpdated":"2020-06-04T21:03:56+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Open Firefox on your remote desktop and visit the YARN Resource Manager\n<br  />UI using the provided <strong>YARN RM</strong> bookmark (or go to URI <code>http://localhost:8088/</code>).</p>\n<p>To view the Spark Application UI if your application is still running, select the\n<br  /><strong>ApplicationMaster</strong> link. To view the History Service UI if your application has\n<br  />completed, select the <strong>History</strong> link.</p>\n"}]},"apps":[],"jobName":"paragraph_1591297824729_-1696274529","id":"20200425-223044_1000277893","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280336"},{"text":"%md\n### Set Configuration Options Using Submit Script Flags","user":"sysadmin","dateUpdated":"2020-06-04T19:10:24+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Set Configuration Options Using Submit Script Flags</h3>\n"}]},"apps":[],"jobName":"paragraph_1591297824730_-1576148189","id":"20200425-223044_502751025","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280337"},{"title":"13 - Specify an Application name","text":"%md\nChange to the correct directory (if necessary) and re-run the program from the previous section, this time specifying an application name. For example:","user":"sysadmin","dateUpdated":"2020-06-04T21:04:01+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Change to the correct directory (if necessary) and re-run the Python or Scala\n<br  />program you wrote in the previous section, this time specifying an application\n<br  />name. For example:</p>\n<pre><code>$ spark-submit --name \"Accounts by State 1\" python-stubs/accounts-by-state.py CA\n</code></pre>\n<!-- -->\n<pre><code>$ spark-submit --name \"Accounts by State 1\" --class stubs.AccountsByState target/accounts-by-state-1.0.jar CA\n</code></pre>\n"}]},"apps":[],"jobName":"paragraph_1591297824730_-1386358265","id":"20200425-223043_1687749516","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280338"},{"text":"%sh\nspark-submit --name \"Accounts by State 1\" --class stubs.AccountsByState target/accounts-by-state-1.0.jar CA","user":"sysadmin","dateUpdated":"2020-06-04T20:39:45+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824731_-1193680760","id":"20200429-182714_1293429514","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280339"},{"title":"14 - Use YARN UI to confirm that the application name was set correctly","text":"%md\nGo back to the YARN RM UI in your browser, and confirm that the application name was set correctly in the list of applications.","user":"sysadmin","dateUpdated":"2020-06-04T21:04:04+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824731_-1754557146","id":"20200425-223043_2070551072","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280340"},{"title":"15 - Use YARN UI to review the properties of the application","text":"%md\nFollow the **ApplicationMaster** or **History** link. View the **Environment** tab. Take note of the `spark.*` properties such as `master` and `app.name`.","user":"sysadmin","dateUpdated":"2020-06-04T21:04:07+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824732_-135249612","id":"20200425-223042_388773792","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280341"},{"title":"16 - Using the conf option","text":"%md\nYou can set most of the common application properties using submit script flags such as name, but for others you need to use conf. Use conf to set the spark.default.parallelism property, which controls how many partitions result after a \"wide\" RDD operation like reduceByKey.","user":"sysadmin","dateUpdated":"2020-06-04T21:04:10+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>You can set most of the common application properties using submit script\n<br  />flags such as name, but for others you need to use conf. Use conf to set the\n<br  />spark.default.parallelism property, which controls how many partitions\n<br  />result after a &ldquo;wide&rdquo; RDD operation like reduceByKey.</p>\n<pre><code>$ spark-submit --name \"Accounts by State 2\" \\\n--conf spark.default.parallelism=4 \\\npython-stubs/accounts-by-state.py CA\n</code></pre>\n<!-- -->\n<pre><code>$ spark-submit --name \"Accounts by State 2\" \\\n--conf spark.default.parallelism=4 \\\n--class stubs.AccountsByState \\\ntarget/accounts-by-state-1.0.jar CA\n</code></pre>\n"}]},"apps":[],"jobName":"paragraph_1591297824732_-917259","id":"20200425-223042_1593700964","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280342"},{"text":"%sh\nspark-submit --name \"Accounts by State 2\" \\\n    --conf spark.default.parallelism=4 \\\n    --class stubs.AccountsByState \\\n    target/accounts-by-state-1.0.jar CA","user":"sysadmin","dateUpdated":"2020-06-04T20:40:47+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824733_1155197879","id":"20200429-183329_38153990","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280343"},{"title":"17 - Use YARN UI to confirm that the parallelism property is set correctly","text":"%md\nView the application history for this application to confirm that the `spark.default.parallelism` property was set correctly. (You will need to view the YARN RM UI again to view the correct application's history.)","user":"sysadmin","dateUpdated":"2020-06-04T21:04:18+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824733_326535909","id":"20200425-223042_278139677","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280344"},{"text":"%md\n### *Optional:* Review Property Setting Overrides","user":"sysadmin","dateUpdated":"2020-06-04T19:10:24+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3><em>Optional:</em> Review Property Setting Overrides</h3>\n"}]},"apps":[],"jobName":"paragraph_1591297824734_-341169537","id":"20200425-223041_330189215","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280345"},{"title":"18 - Display Application Property values","text":"%md\nRerun the previous submit command with the verbose option. This will display\nyour application property default and override values.","user":"sysadmin","dateUpdated":"2020-06-04T21:04:22+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Rerun the previous submit command with the verbose option. This will display\n<br  />your application property default and override values.</p>\n<pre><code>$ spark-submit --verbose --name \"Accounts by State 3\" \\\n--conf spark.default.parallelism=4 \\\npython-stubs/accounts-by-state.py CA\n</code></pre>\n<!-- -->\n<pre><code>$ spark-submit --verbose --name \"Accounts by State 3\" \\\n--conf spark.default.parallelism=4 \\\n--class stubs.AccountsByState \\\ntarget/accounts-by-state-1.0.jar CA\n</code></pre>\n"}]},"apps":[],"jobName":"paragraph_1591297824734_168323501","id":"20200425-223041_1300387039","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280346"},{"text":"%sh\nspark-submit --verbose --name \"Accounts by State 3\" \\\n    --conf spark.default.parallelism=4 \\\n    --class stubs.AccountsByState \\\n    target/accounts-by-state-1.0.jar CA","user":"sysadmin","dateUpdated":"2020-06-04T20:41:03+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824735_-1513324677","id":"20200429-184552_168628892","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280347"},{"title":"19 - Examine the properties","text":"%md\nExamine the extra output displayed when the application starts up.\n\n**a.** The first section starts with `Using properties file`, and shows the\nfile name and the default property settings the application loaded from that\nproperties file.\n\n- What is the system properties file?\n\n- What properties are being set in the file?\n\n**b.** The second section starts with Parsed arguments. This lists the arguments\n- that is, the flags and settings - you set when running the submit script\n(except for `conf`). Submit script flags that you did not pass use their default\nvalues, if defined by the script, or are shown as `null`.\n\n- Does the list correctly include the value you set with `--name`?\n\n- Which arguments (flags) have defaults set in the script and which do not?\n\n**c.** Scroll down to the section that starts with `System properties`. This list\nshows *all* the properties set - those loaded from the system properties file,\nthose you set using submit script arguments, and those you set using the conf\nflag.\n\n- Is `spark.default.parallelism` included and set correctly?","user":"sysadmin","dateUpdated":"2020-06-04T21:04:32+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Examine the extra output displayed when the application starts up.</p>\n<p>a. The first section starts with <code>Using properties file</code>, and shows the\n<br  />file name and the default property settings the application loaded from that\n<br  />properties file.</p>\n<ul>\n<li><p>What is the system properties file?</p>\n</li>\n<li><p>What properties are being set in the file?</p>\n</li>\n</ul>\n<p>b. The second section starts with Parsed arguments. This lists the arguments</p>\n<ul>\n<li><p>that is, the flags and settings - you set when running the submit script\n<br  />(except for <code>conf</code>). Submit script flags that you did not pass use their default\n<br  />values, if defined by the script, or are shown as <code>null</code>.</p>\n</li>\n<li><p>Does the list correctly include the value you set with <code>--name</code>?</p>\n</li>\n<li><p>Which arguments (flags) have defaults set in the script and which do not?</p>\n</li>\n</ul>\n<p>c. Scroll down to the section that starts with <code>System properties</code>. This list\n<br  />shows <em>all</em> the properties set - those loaded from the system properties file,\n<br  />those you set using submit script arguments, and those you set using the conf\n<br  />flag.</p>\n<ul>\n<li>Is <code>spark.default.parallelism</code> included and set correctly?</li>\n</ul>\n"}]},"apps":[],"jobName":"paragraph_1591297824736_1514812794","id":"20200425-223040_82417787","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280348"},{"text":"%md\n### Bonus Exercise: Set Configuration Properties Programmatically\n\nIf you have more time, attempt the following extra bonus steps:","user":"sysadmin","dateUpdated":"2020-06-04T19:10:24+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Bonus Exercise: Set Configuration Properties Programmatically</h3>\n<p>If you have more time, attempt the following extra bonus steps:</p>\n"}]},"apps":[],"jobName":"paragraph_1591297824736_648874682","id":"20200425-223039_1750191840","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280349"},{"title":"1 - Set the application name","text":"%md\nUsing the builder function `appName` will set the application name.","user":"sysadmin","dateUpdated":"2020-06-04T20:46:08+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824737_-1464751999","id":"20200425-221401_1112875023","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280350"},{"title":"2 - Run the application again","text":"%md\nRe-run the application without using script options to set properties.","user":"sysadmin","dateUpdated":"2020-06-04T19:10:24+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824737_-482839204","id":"20200425-233351_1449419144","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280351"},{"title":"3 - Use the YARN UI to confirm the application name was correctly set","text":"%md\nView the YARN UI to confirm that the application name was correctly set.","user":"sysadmin","dateUpdated":"2020-06-04T19:10:24+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824738_2070699337","id":"20200425-233351_1170536428","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280352"},{"text":"%md\nYou can find the solution in the `bonus` package in the exercise project.","user":"sysadmin","dateUpdated":"2020-06-04T20:44:36+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>You can find the Python bonus solution in <code>$DEVSH/exercises/sparkapplication/python-bonus</code>.\n<br  />The Scala solution is in the <code>bonus</code> package in the exercise project.</p>\n"}]},"apps":[],"jobName":"paragraph_1591297824738_517703886","id":"20200425-221401_564218238","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280353"},{"text":"%md\n# Result\n**You have now:** \n\n---","user":"sysadmin","dateUpdated":"2020-06-04T19:10:24+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Result</h1>\n<p><strong>You have now:</strong></p>\n<hr />\n"}]},"apps":[],"jobName":"paragraph_1591297824739_-2091273511","id":"20181126-133507_1472573213","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280354"},{"text":"%md\n# Solution\n---\nThis section will show you how to correctly edit the stub file and the correct commands for the exercise to run completely and without errors. The solution file is provided for comparison, there is no need to edit it.","user":"sysadmin","dateUpdated":"2020-06-04T21:03:04+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Solution</h1>\n<hr />\n"}]},"apps":[],"jobName":"paragraph_1591297824740_-1845487403","id":"20181018-125200_1133281582","dateCreated":"2020-06-04T19:10:24+0000","dateStarted":"2020-06-04T20:59:34+0000","dateFinished":"2020-06-04T20:59:35+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:280355"},{"text":"%md\n### Write and Run a Spark Application in Python","user":"sysadmin","dateUpdated":"2020-06-04T19:10:24+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824741_-1039500684","id":"20200429-052251_1522474166","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280356"},{"title":"1 - Change to the project directory","text":"%sh\ncd /home/devuser/bin/devsh/exercises/spark-application/accounts-by-state_project/\nls","user":"sysadmin","dateUpdated":"2020-06-04T20:48:22+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/sh","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591303656667_-428992629","id":"20200604-204736_1856027880","dateCreated":"2020-06-04T20:47:36+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:280357"},{"title":"2 - Build the exercise project using Maven","text":"%sh\nmvn package","user":"sysadmin","dateUpdated":"2020-06-04T20:55:36+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/sh","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591303702652_-1749067580","id":"20200604-204822_1111633401","dateCreated":"2020-06-04T20:48:22+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:280358"},{"title":"3 - Edit the AccountsByState class","text":"%md\nEdit the Scala class defined in stubs package in `src/main/scala/stubs/AccountsByState.scala`.","user":"sysadmin","dateUpdated":"2020-06-04T20:49:36+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591303744883_-1411643654","id":"20200604-204904_215814266","dateCreated":"2020-06-04T20:49:04+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:280359"},{"title":"4 - Create a SparkSession object using the following code:","text":"%md\n```\nval spark = Sparksession.builder.getOrCreate()\n```","user":"sysadmin","dateUpdated":"2020-06-04T20:50:22+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591303790024_-317606061","id":"20200604-204950_1527495788","dateCreated":"2020-06-04T20:49:50+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:280360"},{"title":"5 - Reduce distracting output","text":"%md\nOptional: Change the application log level from `INFO` (the default) to `WARN` to reduce distracting output.\n\n```\nspark.sparkContext.setLogLevel(\"WARN\")\n```","user":"sysadmin","dateUpdated":"2020-06-04T20:50:44+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591303830861_-847380044","id":"20200604-205030_1058050109","dateCreated":"2020-06-04T20:50:30+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:280361"},{"title":"6 - Load the accounts table and select accounts where the state matches the argument provided","text":"%md\nIn the body of the program, load the `accounts` Hive table into a DataFrame. Select accounts where the state column value matches the string provided as the first argument to the application. Save the results to a Parquet file called `/user/zeppelin/accounts_by_state/`*state-code* (where *state-code* is a string such as CA). Use overwrite mode when saving the file so that you can re-run the application without needing to delete the save directory.","user":"sysadmin","dateUpdated":"2020-06-04T21:03:20+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591303851971_-409057437","id":"20200604-205051_2135170513","dateCreated":"2020-06-04T20:50:51+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:280362"},{"title":"7 - Stopping the Spark session","text":"%md\nAt the end of the application, be sure to stop the Spark session:\n\n```\nspark.stop\n```","user":"sysadmin","dateUpdated":"2020-06-04T20:52:08+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591303904185_113065312","id":"20200604-205144_1067524215","dateCreated":"2020-06-04T20:51:44+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:280363"},{"title":"8 - Run Maven locally to cache the Spark libraries","text":"%sh\nmvn package","user":"sysadmin","dateUpdated":"2020-06-04T20:54:45+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/sh","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591303928559_924483003","id":"20200604-205208_981701453","dateCreated":"2020-06-04T20:52:08+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:280364"},{"title":"9 - If you have a Spark shell running in any terminal, exit the shell before running your application","text":"","user":"sysadmin","dateUpdated":"2020-06-04T20:53:56+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591303986549_304046070","id":"20200604-205306_1879377782","dateCreated":"2020-06-04T20:53:06+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:280365"},{"title":"10 - Run your application","text":"%sh\nspark-submit --class stubs.AccountsByState target/accounts-by-state-1.0.jar CA\n\n# Solution\n#spark-submit --class solution.AccountsByState target/accounts-by-state-1.0.jar CA","user":"sysadmin","dateUpdated":"2020-06-04T20:59:26+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824742_1998007400","id":"20200429-180046_1605716636","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280366"},{"title":"11 - Verify the data was saved correctly and use parquet-tools to verify the contents","text":"%sh\nhdfs dfs -ls /user/zeppelin/accounts_by_state/\n#parquet-tools","user":"sysadmin","dateUpdated":"2020-06-04T21:04:36+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824743_-1395155117","id":"20200429-180045_1098646529","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280367"},{"text":"%md\n### View the Spark Application UI","user":"sysadmin","dateUpdated":"2020-06-04T19:10:24+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>View the Spark Application UI</h3>\n"}]},"apps":[],"jobName":"paragraph_1591297824743_-1885714526","id":"20200429-180038_1523159961","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280368"},{"title":"12 - Visit the YARN Resource Manager UI","text":"","user":"sysadmin","dateUpdated":"2020-06-04T21:04:39+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824744_-2114195378","id":"20200429-184123_787430428","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280369"},{"text":"%md\n### Set Configuration Options Using Submit Script Flags","user":"sysadmin","dateUpdated":"2020-06-04T19:10:24+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Set Configuration Options Using Submit Script Flags</h3>\n"}]},"apps":[],"jobName":"paragraph_1591297824744_1962522039","id":"20200429-184152_595857218","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280370"},{"title":"13 - Specify an Application name","text":"%sh\nspark-submit --name \"Accounts by State 1\" --class stubs.AccountsByState target/accounts-by-state-1.0.jar CA","user":"sysadmin","dateUpdated":"2020-06-04T21:04:50+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824745_1719924058","id":"20200429-180037_1857916811","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280371"},{"title":"14 - Use YARN UI to confirm that the application name was set correctly","user":"sysadmin","dateUpdated":"2020-06-04T21:05:17+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824745_-72198849","id":"20200429-180036_1023993316","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280372"},{"title":"15 - Use YARN UI to review the properties of the application","user":"sysadmin","dateUpdated":"2020-06-04T21:05:20+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824746_1764505435","id":"20200429-180036_1907901285","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280373"},{"title":"16 - Using the conf option","text":"%sh\nspark-submit --name \"Accounts by State 2\" \\\n    --conf spark.default.parallelism=4 \\\n    --class stubs.AccountsByState \\\n    target/accounts-by-state-1.0.jar CA","user":"sysadmin","dateUpdated":"2020-06-04T21:05:23+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824746_-781896154","id":"20200429-180036_2040189704","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280374"},{"title":"17 - Use YARN UI to confirm that the parallelism property is set correctly","user":"sysadmin","dateUpdated":"2020-06-04T21:05:27+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824747_744721222","id":"20200429-180035_845632759","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280375"},{"text":"%md\n### *Optional:* Review Property Setting Overrides","user":"sysadmin","dateUpdated":"2020-06-04T19:10:24+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3><em>Optional:</em> Review Property Setting Overrides</h3>\n"}]},"apps":[],"jobName":"paragraph_1591297824748_2031716056","id":"20200429-180034_1618506913","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280376"},{"title":"18 - Display Application Property values","text":"%sh\nspark-submit --verbose --name \"Accounts by State 3\" \\\n    --conf spark.default.parallelism=4 \\\n    --class stubs.AccountsByState \\\n    target/accounts-by-state-1.0.jar CA","user":"sysadmin","dateUpdated":"2020-06-04T21:05:30+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824748_-2083495460","id":"20200429-180034_1684671470","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280377"},{"title":"19 - Examine the properties","user":"sysadmin","dateUpdated":"2020-06-04T21:05:32+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824749_1055332065","id":"20200429-180033_1369633160","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280378"},{"text":"%md\n### Bonus Exercise: Set Configuration Properties Programmatically","user":"sysadmin","dateUpdated":"2020-06-04T19:10:24+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Bonus Exercise: Set Configuration Properties Programmatically</h3>\n"}]},"apps":[],"jobName":"paragraph_1591297824749_1740669651","id":"20200429-180032_1717945093","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280379"},{"title":"1 - Set the application name","text":"%md\nUsing the builder function `appName` will set the application name.","user":"sysadmin","dateUpdated":"2020-06-04T20:57:13+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824750_-1863825156","id":"20200429-180032_1878392489","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280380"},{"title":"2 - Run the application again","text":"%sh\nspark-submit --class stubs.AccountsByState target/accounts-by-state-1.0.jar CA\n\n# Solution\n#spark-submit --class solution.AccountsByState target/accounts-by-state-1.0.jar CA","user":"sysadmin","dateUpdated":"2020-06-04T20:59:40+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824750_571280502","id":"20200429-180031_1146863009","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280381"},{"title":"3 - Use the YARN UI to confirm the application name was correctly set","user":"sysadmin","dateUpdated":"2020-06-04T19:10:24+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1591297824751_7603510","id":"20200429-180029_822001470","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280382"},{"text":"%md\nWe hope you've enjoyed this lab. Below are additional resources that you should find useful:\n\n1. [Hortonworks Apache Spark Tutorials](http://hortonworks.com/tutorials/#tuts-developers) are your natural next step where you can explore Spark in more depth.\n2. [Hortonworks Community Connection (HCC)](https://community.hortonworks.com/spaces/85/data-science.html?type=question) is a great resource for questions and answers on Spark, Data Analytics/Science, and many more Big Data topics.\n3. [Hortonworks Apache Spark Docs](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/spark-overview/content/analyzing_data_with_apache_spark.html) - official Spark documentation.\n4. [Hortonworks Apache Zeppelin Docs](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/zeppelin-overview/content/overview.html) - official Zeppelin documentation.\n","user":"sysadmin","dateUpdated":"2020-06-04T19:10:24+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>We hope you've enjoyed this lab. Below are additional resources that you should find useful:</p>\n<ol>\n<li><a href=\"http://hortonworks.com/tutorials/#tuts-developers\">Hortonworks Apache Spark Tutorials</a> are your natural next step where you can explore Spark in more depth.</li>\n<li><a href=\"https://community.hortonworks.com/spaces/85/data-science.html?type=question\">Hortonworks Community Connection (HCC)</a> is a great resource for questions and answers on Spark, Data Analytics/Science, and many more Big Data topics.</li>\n<li><a href=\"https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/spark-overview/content/analyzing_data_with_apache_spark.html\">Hortonworks Apache Spark Docs</a> - official Spark documentation.</li>\n<li><a href=\"https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/zeppelin-overview/content/overview.html\">Hortonworks Apache Zeppelin Docs</a> - official Zeppelin documentation.</li>\n</ol>\n"}]},"apps":[],"jobName":"paragraph_1591297824751_-1676642248","id":"20181126-133017_244739700","dateCreated":"2020-06-04T19:10:24+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:280383"}],"name":"ScalaSpark/12-Writing,Configuring,AndRunningASparkApplication","id":"2FC27JS13","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"sh:shared_process":[],"jdbc:shared_process":[],"spark2:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}