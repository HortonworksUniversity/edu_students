{"paragraphs":[{"text":"%md\n# About\n**Lab:** Working with Apache Kafka Streaming Messages\n**Objective:** Read streaming data from a Kafka topic and send data to a Kafka topic.\n**File locations:**\n    Test data (local): /home/devuser/data/telco/activations_stream/\n    Test script: /home/devuser/bin/devsh/scripts/streamtest-kafka.sh\n    Solution files: /home/devuser/bin/devsh/scripts/streaming-kafka-source.pyspark\n                    /home/devuser/bin/devsh/scripts/streaming-kafka-sink.pyspark\n**Successful outcome:** \n**Before you begin:** \n**Related lessons:** \n\n---","user":"sysadmin","dateUpdated":"2020-06-02T22:30:13+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>About</h1>\n<p><strong>Lab:</strong> Working with Apache Kafka Streaming Messages\n<br  /><strong>Objective:</strong> Read streaming data from a Kafka topic and send data to a Kafka topic.\n<br  /><strong>File locations:</strong></p>\n<pre><code>Test data (local): $DEVDATA/activations_stream/\nTest script: $DEVSH/scripts/streamtest-kafka.sh\nSolution files: streaming-kafka-source.pyspark\n                streaming-kafka-source.scalaspark\n                streaming-kafka-sink.pyspark\n                streaming-kafka-sink.scalaspark\n</code></pre>\n<p><strong>Successful outcome:</strong>\n<br  /><strong>Before you begin:</strong>\n<br  /><strong>Related lessons:</strong></p>\n<hr />\n"}]},"apps":[],"jobName":"paragraph_1590955213772_-1535730878","id":"20181126-092644_1457476546","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:235247"},{"text":"%md\n# Setup\nNone","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Setup</h1>\n<p>None</p>\n"}]},"apps":[],"jobName":"paragraph_1590955213772_176207153","id":"20181201-044336_178705192","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235248"},{"text":"%md\n# Lab\n","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Lab</h1>\n"}]},"apps":[],"jobName":"paragraph_1590955213773_-51499124","id":"20181126-093358_358613711","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235249"},{"text":"%md\n### Read Messages from a Kafka Source\n\nIn this section, you will create a streaming Kafka DataFrame based on device activation Kafka messages in the `activations` topic. The message content is in JSON format. You will extract the required data and calculate the number of activations by model name.\n\nThe Kafka messages will be generated by a test script using the files in `/home/devuser/data/telco/activations_stream/`. You may wish to review the data before proceeding.","user":"sysadmin","dateUpdated":"2020-06-02T22:31:15+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Read Messages from a Kafka Source</h3>\n<p>In this section, you will create a streaming Kafka DataFrame based on device activation\n<br  />Kafka messages in the <code>activations</code> topic. The message content is in JSON format.\n<br  />You will extract the required data and calculate the number of activations by model\n<br  />name.</p>\n<p>The Kafka messages will be generated by a test script using the files in\n<br  /><code>$DEVDATA/activations_stream/</code>. You may wish to review the data before proceeding.</p>\n"}]},"apps":[],"jobName":"paragraph_1590955213773_555228157","id":"20200426-203807_1093644001","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235250"},{"title":"1 - Terminate any Spark shells","text":"%md\nIf you currently have a Spark shell running in a terminal session, exit it.","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213773_1109292134","id":"20200426-203923_163702109","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235251"},{"title":"2 - Create a topic","text":"%md\nCreate the `activations` topic for the streaming messages.","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<pre><code>    $ kafka-topics --create --zookeeper localhost:2181 \\\n    --partitions 2 --replication-factor 1 --topic activations\n</code></pre>\n"}]},"apps":[],"jobName":"paragraph_1590955213773_153773323","id":"20200426-203953_665503242","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235252"},{"text":"%sh\n$ kafka-topics --create --zookeeper localhost:2181 \\\n--partitions 2 --replication-factor 1 --topic activations","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213773_-271152055","id":"20200429-225447_1230942060","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235253"},{"title":"3 - Start a new local Spark shell","text":"%md\nThe course exercise environment's resources are not sufficient to run a streaming application. Start a new Python Spark shell running locally instead of on the cluster.\n\n    $ pyspark --master local[2]","user":"sysadmin","dateUpdated":"2020-06-05T00:27:24+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>The course exercise environment's resources are not sufficient to run a streaming\n<br  />application. Start a new Python or Scala Spark shell running locally instead of on the\n<br  />cluster.</p>\n<pre><code>$ pyspark --master local[2]\n</code></pre>\n<!-- -->\n<pre><code>$ spark-shell --master local[2]\n</code></pre>\n"}]},"apps":[],"jobName":"paragraph_1590955213774_-1656608818","id":"20200426-203952_996510190","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235254"},{"title":"4 - Create a streaming DataFrame","text":"%md\nCreate a streaming DataFrame called `kafkaDF` using the following settings:\n\n- Format: `kafka`\n- `kafka.bootstrap.servers` option: `localhost:9092`\n- `subscribe` option: `activations` (topic name)","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Create a streaming DataFrame called <code>kafkaDF</code> using the following settings:</p>\n<ul>\n<li>Format: <code>kafka</code></li>\n<li><code>kafka.bootstrap.servers</code> option: <code>localhost:9092</code></li>\n<li><code>subscribe</code> option: <code>activations</code> (topic name)</li>\n</ul>\n"}]},"apps":[],"jobName":"paragraph_1590955213774_-1189179004","id":"20200426-203952_1826451491","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235255"},{"text":"%pyspark\n","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213774_-1763347938","id":"20200426-203951_1151868381","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235256"},{"title":"5 - Display the schema of the DataFrame","text":"%md\nNote that the `value` column contains binary values.","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Note that the <code>value</code> column contains binary values.</p>\n"}]},"apps":[],"jobName":"paragraph_1590955213774_251246814","id":"20200426-203950_166689905","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235257"},{"text":"%pyspark\n","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213774_-1604256906","id":"20200426-203949_1312335789","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235258"},{"title":"6 - Create a new DataFrame","text":"%md\nCreate a new DataFrame called `stringValueDF` containing only the value column from `kafkaDF`. The new `value` should be string type.\n\nHint: use the `cast(\"string\")` function on the value column reference.","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Create a new DataFrame called <code>stringValueDF</code> containing only the value\n<br  />column from <code>kafkaDF</code>. The new <code>value</code> should be string type.</p>\n<p>Hint: use the <code>cast(\"string\")</code> function on the value column reference.</p>\n"}]},"apps":[],"jobName":"paragraph_1590955213774_-1909402823","id":"20200426-203948_477490279","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235259"},{"text":"%pyspark\n","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213775_278388022","id":"20200426-203948_1280825326","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235260"},{"title":"7 - Confirm the column type was changed","text":"%md\nDisplay the schema to confirm that the column type was changed correctly.","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213775_1927002752","id":"20200426-203947_1010888942","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235261"},{"text":"%pyspark\n","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213775_795559224","id":"20200426-203947_900544353","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235262"},{"title":"8 - Create a new DataFrame","text":"%md\nCreate a new DataFrame called `activationsDF` with a single column called `activation`. The column should contain sub-columns for the four values in the activation JSON records: `acct_num`, `dev_id`, `phone`, and `model`.\n\n**a.** Create a schema to map the JSON values to columns.","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Create a new DataFrame called <code>activationsDF</code> with a single column called\n<br  /><code>activation</code>. The column should contain sub-columns for the four values in the\n<br  />activation JSON records: <code>acct_num</code>, <code>dev_id</code>, <code>phone</code>, and <code>model</code>.</p>\n<p><strong>a.</strong> Create a schema to map the JSON values to columns.</p>\n"}]},"apps":[],"jobName":"paragraph_1590955213775_1076226208","id":"20200426-203946_1670977750","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235263"},{"text":"%pyspark\nfrom pyspark.sql.types import *\n\nactivationsSchema = StructType([\nStructField(\"acct_num\", IntegerType()),\nStructField(\"dev_id\", StringType()),\nStructField(\"phone\", StringType()),\nStructField(\"model\", StringType())])","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213775_-1835230636","id":"20200426-203945_2047118956","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235264"},{"title":"8 b - Parse the value column","text":"%md\nUse the `from_json` function to parse the values in the `value` column to the schema above.","user":"sysadmin","dateUpdated":"2020-06-02T22:34:03+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p><strong>b.</strong> Use the <code>from_json</code> function to parse teh values in the <code>value</code> column to the schema above.</p>\n"}]},"apps":[],"jobName":"paragraph_1590955213775_846498028","id":"20200426-203944_240993201","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235265"},{"text":"%pyspark\nfrom pyspark.sql.functions import *\n\nactivationsDF = stringValueDF. \\\nselect(from_json(stringValueDF.value,\nactivationsSchema).\nalias(\"activation\"))","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213775_-1809105933","id":"20200426-203944_1147612167","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235266"},{"title":"9 - Confirm the new DataFrame's schema is correct","text":"%md\nView the new DataFrames's schema to confirm that it is correct.","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213776_309993212","id":"20200426-203943_532597384","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235267"},{"text":"%pyspark\n","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213776_-1720641556","id":"20200426-203943_1223752146","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235268"},{"title":"10 - Create and start a streaming query","text":"%md\nCreate and start a streaming query based on `activationsDF`. Display the output to the console using output mode `append`. The elements in the DataFrame are longer than the default output, so set the `truncate` option to `false`.","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Create and start a streaming query based on <code>activationsDF</code>. Display the output\n<br  />to the console using output mode <code>append</code>. The elements in the DataFrame are\n<br  />longer than the default output, so set the <code>truncate</code> option to <code>false</code>.</p>\n"}]},"apps":[],"jobName":"paragraph_1590955213776_286327415","id":"20200426-203928_558847417","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235269"},{"text":"%pyspark\n","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213776_-2045135690","id":"20200426-203928_240614274","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235270"},{"title":"11 - Test the query output","text":"%md\nTest the query output using the provided test script. Run the script in a separate terminal window (not running the Spark shell).\n\n```\n    /home/devuser/bin/devsh/scripts/streamtest-kafka.sh activations \\\n    localhost:9092 10 /user/zeppelin/activations_stream\n```\n\nThis command produces Kafka messages based on the JSON lines in `/user/zeppelin/activations_stream/`. It sends the messages to the Kafka broker running on `localhost` on the `activations` topic, 10 messages per second.\n\nWhen prompted, confirm that the script settings are correct.","user":"sysadmin","dateUpdated":"2020-06-02T22:34:28+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Test the query output using the provided test script. Run the script in a separate\n<br  />terminal window (not running the Spark shell).</p>\n<pre><code>$ $DEVSH/scripts/streamtest-kafka.sh activations \\\nlocalhost:9092 10 $DEVDATA/activations_stream\n</code></pre>\n<p>This command produces Kafka messages based on the JSON lines in <code>$DEVDATA/activations_stream/</code>.\n<br  />It sends the messages to the Kafka broker running on <code>localhost</code> on the <code>activations</code> topic, 10 messages per second.</p>\n<p>When prompted, confirm that the script settings are correct.</p>\n"}]},"apps":[],"jobName":"paragraph_1590955213776_1851019330","id":"20200426-203927_353325578","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235271"},{"title":"12 - Run the test script for several seconds","text":"%md\nThe script will display each line from the file as it sends the corresponding Kafka message. Let the script run for several seconds, then stop it using Ctrl+C.","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>The script will display each line from the file as it sends the corresponding Kafka\n<br  />message. Let the script run for several seconds, then stop it using Ctrl+C.</p>\n"}]},"apps":[],"jobName":"paragraph_1590955213776_1227465268","id":"20200426-210541_2098834615","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235272"},{"title":"13 - Review the output displayed by the streaming query","text":"%md\nReturn to the Spark shell and review the output displayed by the streaming query. Note that each element in the result DataFrame is an array of strings -- that is, the value of the `activation` column.","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Return to the Spark shell and review the output displayed by the streaming query.\n<br  />Note that each element in the result DataFrame is an array of strings &ndash; that is, the\n<br  />value of the <code>activation</code> column.</p>\n"}]},"apps":[],"jobName":"paragraph_1590955213777_135997977","id":"20200426-210541_1596990","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235273"},{"title":"14 - Stopping the query","text":"%md\nWhen you are done testing, stop the query by calling the `stop` function on the `StreamingQuery` object.","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213777_112446568","id":"20200426-210541_1127240569","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235274"},{"text":"%pyspark\n","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213777_1433667503","id":"20200429-231148_1561617789","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235275"},{"title":"15 - Optional: Perform additional transformations","text":"%md\n*Optional:* Try performing additional transformations on the device activation data in the Kafka message stream. For instance, try counting activations by model.","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p><em>Optional:</em> Try performing additional transformations on the device activation data\n<br  />in the Kafka message stream. For instance, try counting activations by model.</p>\n"}]},"apps":[],"jobName":"paragraph_1590955213777_1464193184","id":"20200426-210541_1555786742","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235276"},{"text":"%pyspark\n","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213777_297152632","id":"20200429-231250_1028042742","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235277"},{"text":"%md\n### Send a Stream of Messages to a Kafka Sink\n\nIn this section, you will send Kafka messages containing information about device activations to the `activations-out` topic.","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Send a Stream of Messages to a Kafka Sink</h3>\n<p>In this section, you will send Kafka messages containing information about device\n<br  />activations to the <code>activations-out</code> topic.</p>\n"}]},"apps":[],"jobName":"paragraph_1590955213777_-2093535205","id":"20200426-210541_1938942316","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235278"},{"title":"16 - Exit the Spark shell you started in the section above","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213777_-632776564","id":"20200426-210541_34201750","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235279"},{"title":"17 - Create the topic for the output messages","text":"","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":true,"editorSetting":{"language":"scala","editOnDblClick":false,"completionSupport":true,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<pre><code>$ kafka-topics --create --zookeeper localhost:2181 \\\n--partitions 2 --replication-factor 1 \\\n--topic activations-out\n</code></pre>\n"}]},"apps":[],"jobName":"paragraph_1590955213778_402607433","id":"20200426-210540_728715783","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235280"},{"text":"%sh\nkafka-topics --create --zookeeper localhost:2181 \\\n--partitions 2 --replication-factor 1 \\\n--topic activations-out","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213778_307087686","id":"20200429-231606_367276239","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235281"},{"title":"18 - Start a Kafka consumer","text":"%md\nStart a Kafka consumer running on the command line to test the output you will produce below.\n\nLeave the consumer application running. You will return later to confirm your Kafka message output.","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Start a Kafka consumer running on the command line to test the output you will produce below.</p>\n<pre><code>$ kafka-console-consumer --topic activations-out \\\n--bootstrap-server localhost:9092\n</code></pre>\n<p>Leave the consumer application running. You will return later to confirm your Kafka message output.</p>\n"}]},"apps":[],"jobName":"paragraph_1590955213778_-2023964911","id":"20200426-210540_732200048","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235282"},{"text":"%sh\n$ kafka-console-consumer --topic activations-out \\\n--bootstrap-server localhost:9092","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213778_86398538","id":"20200429-231708_994413478","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235283"},{"title":"19 - In a separate terminal window, restart the shell","text":"%md\n```\n$ pyspark --master local[2]\n```","user":"sysadmin","dateUpdated":"2020-06-02T22:37:05+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<pre><code>$ pyspark --master local[2]\n</code></pre>\n<pre><code>$ spark-shell --master local[2]\n</code></pre>\n"}]},"apps":[],"jobName":"paragraph_1590955213778_-178175079","id":"20200426-210540_1848021454","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235284"},{"title":"20 - Create the schema for the streaming DataFrame","text":"%md\nThe test data files for this section are the same ones you use in the previous section, containing JSON records with device activation data. You will simulate incoming streaming data by reading the existing JSON files in the data directory, one file per micro-batch trigger.\n\nCreate a schema to map the JSON values to columns.","user":"sysadmin","dateUpdated":"2020-06-02T22:37:15+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>The test data files for this section are the same ones you use in the previous section,\n<br  />containing JSON records with device activation data. You will simulate incoming\n<br  />streaming data by reading the existing JSON files in the data directory, one file per\n<br  />micro-batch trigger.</p>\n<p><strong>a.</strong> Create a schema to map the JSON values to columns.</p>\n"}]},"apps":[],"jobName":"paragraph_1590955213778_1844050389","id":"20200426-210540_841145454","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235285"},{"text":"%pyspark\nfrom pyspark.sql.types import *\n\nactivationsSchema = StructType([\nStructField(\"acct_num\", IntegerType()),\nStructField(\"dev_id\", StringType()),\nStructField(\"phone\", StringType()),\nStructField(\"model\", StringType())])","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213779_-915564795","id":"20200426-210540_887017584","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235286"},{"title":"21 - Create a simulated streaming DataFrame","text":"Create a simulated streaming DataFrame based on the JSON activation data, using the schema you created above.","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213779_57338454","id":"20200426-210539_1086808636","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235287"},{"text":"%pyspark\nactivationsDF = spark.readStream. \\\nschema(activationsSchema). \\\noption(\"maxFilesPerTrigger\",1). \\\njson(\"file:///home/devuser/data/activations_stream/\")","user":"sysadmin","dateUpdated":"2020-06-02T22:38:12+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213779_2138701076","id":"20200426-210539_183516831","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235288"},{"title":"22 - Transform the input streaming DataFrame","text":"%md\nTransform the input streaming DataFrame into a new DataFrame with the correct schema and content:\n\n- A `key` column for which all rows contain an empty string (\"\")\n    - Hint: use the Spark SQL `lit(`*literal*`)` function to specify a column with a literal value\n- A `value` string column containing the account number and device ID separated by a comma.\n    - Hint: use the Spark SQL `concat_ws(`*separator*`,` *columns...*`)` function create the comma-delimited string","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Transform the input streaming DataFrame into a new DataFrame with the correct\n<br  />schema and content:</p>\n<ul>\n<li>A <code>key</code> column for which all rows contain an empty string (&ldquo;&ldquo;)<ul>\n<li>Hint: use the Spark SQL <code>lit(</code><em>literal</em><code>)</code> function to specify a column with a\n<br  />literal value</li>\n</ul>\n</li>\n<li>A <code>value</code> string column containing the account number and device ID separated\n<br  />by a comma.<ul>\n<li>Hint: use the Spark SQL <code>concat_ws(</code><em>separator</em><code>,</code> <em>columns&hellip;</em><code>)</code> function\n<br  />create the comma-delimited string</li>\n</ul>\n</li>\n</ul>\n"}]},"apps":[],"jobName":"paragraph_1590955213779_466308644","id":"20200426-210538_261794404","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235289"},{"text":"%pyspark\n","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213779_-1002621713","id":"20200426-210537_658320792","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235290"},{"title":"23 - Create and start a query to produces Kafka messages","text":"%md\nThe query should\n- Use format `kafka`\n- Set the `checkpointLocation` option to `/tmp/kafka-checkpoint`\n- Set the `kafka.bootstrap.servers` to `localhost:9092`\n- Set the `topic` option to `activations-out`\n\n**Note:** If you need to run the query above multiple times, be sure to remove thecheckpoint directory above before rerunning it.\n```\n    $ rm -rf /tmp/kafka-checkpoint\n```","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>The query should</p>\n<ul>\n<li>Use format <code>kafka</code></li>\n<li>Set the <code>checkpointLocation</code> option to <code>/tmp/kafka-checkpoint</code></li>\n<li>Set the <code>kafka.bootstrap.servers</code> to <code>localhost:9092</code></li>\n<li>Set the <code>topic</code> option to <code>activations-out</code></li>\n</ul>\n<p><strong>Note:</strong> If you need to run the query above multiple times, be sure to remove the\n<br  />checkpoint directory above before rerunning it.</p>\n<pre><code>$ rm -rf /tmp/kafka-checkpoint\n</code></pre>\n"}]},"apps":[],"jobName":"paragraph_1590955213779_-546320319","id":"20200426-210537_37861484","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235291"},{"text":"%pyspark\n","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213779_-494221609","id":"20200426-210536_1372487501","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235292"},{"title":"24 - Confirm that the messages are being received correctly","text":"%md\nThe query should start generating Kafka messages immediately. Return to the window where you started the console consumer to confirm that the messages are being received and have the correct format.","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>The query should start generating Kafka messages immediately. Return to the\n<br  />window where you started the console consumer to confirm that the messages are\n<br  />being received and have the correct format.</p>\n"}]},"apps":[],"jobName":"paragraph_1590955213780_-735475178","id":"20200426-210535_991493700","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235293"},{"title":"25 - Stopping the query","text":"%md\nWhen you are done testing, exit the consumer application using `Ctrl+C`. Then stop the query using the `stop` function and exit the Spark shell.","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>When you are done testing, exit the consumer application using <code>Ctrl+C</code>. Then stop the query using the <code>stop</code> function and exit the Spark shell.</p>\n"}]},"apps":[],"jobName":"paragraph_1590955213780_251008103","id":"20200426-203926_711291629","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235294"},{"text":"%pyspark\n","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213780_-865546839","id":"20200426-213337_581099564","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235295"},{"text":"%md\n# Result\n**You have now:** \n\n---","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Result</h1>\n<p><strong>You have now:</strong></p>\n<hr />\n"}]},"apps":[],"jobName":"paragraph_1590955213780_-998952519","id":"20181126-133507_1472573213","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235296"},{"text":"%md\n# Solution\n---","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Solution</h1>\n<hr />\n"}]},"apps":[],"jobName":"paragraph_1590955213780_1703752528","id":"20181018-125200_1133281582","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235297"},{"text":"%md\n### Read Messages from a Kafka Source","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213780_-1131860068","id":"20200429-224937_1880357458","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235298"},{"title":"1 - Create a topic","text":"%sh\nkafka-topics --create --zookeeper localhost:2181 \\\n--partitions 2 --replication-factor 1 --topic activations\n# /home/devuser/bin/devsh/scripts/streamtest-kafka.sh activations localhost:9092 10 /home/devuser/data/telco/activations_stream","user":"sysadmin","dateUpdated":"2020-06-02T03:55:06+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"bash: kafka-topics: command not found\n"},{"type":"TEXT","data":"ExitValue: 127"}]},"apps":[],"jobName":"paragraph_1590955213781_-700057140","id":"20200429-225016_359372993","dateCreated":"2020-05-31T20:00:13+0000","dateStarted":"2020-05-31T20:01:47+0000","dateFinished":"2020-05-31T20:01:47+0000","status":"ERROR","progressUpdateIntervalMs":500,"$$hashKey":"object:235299"},{"title":"3 - Start a new local Spark shell","text":"%sh\n# pyspark --master local[2]","user":"sysadmin","dateUpdated":"2020-06-02T03:55:46+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213781_-434197991","id":"20200429-225015_615463066","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235300"},{"title":"4 - Create a streaming DataFrame","text":"%pyspark\nkafkaDF = spark.readStream.format(\"kafka\").option(\"kafka.bootstrap.servers\", \"localhost:9092\").option(\"subscribe\", \"activations\").load()","user":"sysadmin","dateUpdated":"2020-05-31T20:11:30+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213781_-232807963","id":"20200429-225013_613497445","dateCreated":"2020-05-31T20:00:13+0000","dateStarted":"2020-05-31T20:11:30+0000","dateFinished":"2020-05-31T20:11:37+0000","status":"ABORT","progressUpdateIntervalMs":500,"$$hashKey":"object:235301"},{"title":"5 - Display the schema of the DataFrame","text":"%pyspark\nkafkaDF.printSchema()","user":"sysadmin","dateUpdated":"2020-05-31T20:05:16+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213782_-220029608","id":"20200429-225010_1354703023","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235302"},{"title":"6 - Create a new DataFrame","text":"%pyspark\nstringValueDF = kafkaDF.select(kafkaDF.value.cast(\"string\"))","user":"sysadmin","dateUpdated":"2020-05-31T20:05:28+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213782_662148237","id":"20200429-225009_10700973","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235303"},{"title":"7 - Confirm the column type was changed","text":"%pyspark\n#*** !!! This line was missing from both solution files !!! ***\nstringValueDF.printSchema()","user":"sysadmin","dateUpdated":"2020-05-31T20:06:48+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213782_-54267917","id":"20200429-225008_660411338","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235304"},{"title":"8 - Create a new DataFrame","text":"%pyspark\nfrom pyspark.sql.types import *\n\nactivationsSchema = StructType([\n  StructField(\"acct_num\", IntegerType()),\n  StructField(\"dev_id\", StringType()),\n  StructField(\"phone\", StringType()),\n  StructField(\"model\", StringType())])","user":"sysadmin","dateUpdated":"2020-05-31T20:06:50+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213782_1253535553","id":"20200429-225007_367971138","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235305"},{"title":"8 b - Parse the value column","text":"%pyspark\n# from pyspark.sql.functions import *\nactivationsDF = stringValueDF.select(from_json(stringValueDF.value, activationsSchema).alias(\"activation\"))","user":"sysadmin","dateUpdated":"2020-05-31T20:07:38+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213783_-955382422","id":"20200429-225006_1594579468","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235306"},{"title":"9 - Confirm the new DataFrame's schema is correct","text":"%pyspark\n#*** !!! parentheses missing in Scala code !!! ***\nactivationsDF.printSchema()","user":"sysadmin","dateUpdated":"2020-05-31T20:08:10+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213783_-861129092","id":"20200429-225005_1171313932","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235307"},{"title":"10 - Create and start a streaming query","text":"%pyspark\nactivationsQuery = activationsDF.writeStream.outputMode(\"append\").option(\"truncate\",\"false\").format(\"console\").start()","user":"sysadmin","dateUpdated":"2020-05-31T20:08:03+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213783_-726286635","id":"20200429-225003_190569295","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235308"},{"title":"11 - Test the query outptut","text":"%sh\n/home/devuser/bin/devsh/scripts/streamtest-kafka.sh activations localhost:9092 10 /home/devuser/data/telco/activations_stream","user":"sysadmin","dateUpdated":"2020-06-02T22:36:23+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213784_-2012214273","id":"20200429-225002_38570415","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235309"},{"title":"12 - Run the test script for several seconds","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213784_2061425474","id":"20200429-225002_1467321867","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235310"},{"title":"13 - Review the output displayed by the streaming query","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213784_1512123773","id":"20200429-225001_1997974606","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235311"},{"title":"14 - Stopping the query","text":"%pyspark\n#*** !!! parentheses missing in Scala code !!! ***\nactivationsQuery.stop()","user":"sysadmin","dateUpdated":"2020-05-31T20:08:44+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213784_551668353","id":"20200429-225001_1085492957","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235312"},{"title":"15 - Optional: Perform additional transformations","text":"%pyspark\n# Count activations by model\ncountByModelDF = activationsDF.groupBy(\"activation.model\").count()\n# count aggregation only supported with complete output mode\ncountByModelQuery = countByModelDF.writeStream.outputMode(\"complete\").format(\"console\").start()","user":"sysadmin","dateUpdated":"2020-05-31T20:08:36+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213784_-418191232","id":"20200429-225000_1716593565","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235313"},{"title":"Stop the query","text":"%pyspark\n#*** !!! parentheses missing in Scala code !!! ***\ncountByModelQuery.stop()","user":"sysadmin","dateUpdated":"2020-05-31T20:09:18+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213785_-1384957617","id":"20200429-224958_1282131172","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235314"},{"text":"%md\n### Send a Stream of Messages to a Kafka Sink","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h3>Send a Stream of Messages to a Kafka Sink</h3>\n"}]},"apps":[],"jobName":"paragraph_1590955213785_-2033226918","id":"20200429-224957_1722144467","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235315"},{"title":"16 - Exit the Spark shell you started in the section above","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213785_-47476406","id":"20200429-224957_429546116","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235316"},{"title":"17 - Create the topic for the output messages","text":"%sh\nkafka-topics --create --zookeeper localhost:2181 \\\n--partitions 2 --replication-factor 1 \\\n--topic activations-out","user":"sysadmin","dateUpdated":"2020-05-31T20:09:05+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213785_-1772567636","id":"20200429-224956_1476701879","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235317"},{"title":"18 - Start a Kafka consumer","text":"%sh\nkafka-console-consumer --topic activations-out \\\n--bootstrap-server localhost:9092","user":"sysadmin","dateUpdated":"2020-05-31T20:09:11+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213786_254754917","id":"20200429-224954_879965496","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235318"},{"title":"19 - In a separate terminal window, restart the shell","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213786_1507809827","id":"20200429-231546_372543314","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235319"},{"title":"20 - Create the schema for the streaming DataFrame","text":"%pyspark\n#from pyspark.sql.types import *\n\nactivationsSchema = StructType([\n  StructField(\"acct_num\", IntegerType()),\n  StructField(\"dev_id\", StringType()),\n  StructField(\"phone\", StringType()),\n  StructField(\"model\", StringType())])","user":"sysadmin","dateUpdated":"2020-05-31T20:10:41+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213786_1460974819","id":"20200429-231545_221624480","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235320"},{"title":"21 - Create a simulated streaming DataFrame","text":"%pyspark\nactivationsDF = spark.readStream.schema(activationsSchema).option(\"maxFilesPerTrigger\",1).json(\"file:///home/devuser/data/activations_stream/\")","user":"sysadmin","dateUpdated":"2020-06-05T00:28:08+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213786_833573334","id":"20200429-231543_1403219086","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235321"},{"title":"22 - Transform the input streaming DataFrame","text":"%pyspark\nfrom pyspark.sql.functions import *\n\nactivationsValueDF = activationsDF.select(lit(\"\").alias(\"key\"),concat_ws(\",\",activationsDF.acct_num,activationsDF.dev_id).alias(\"value\"))\nactivationsValueDF.printSchema()","user":"sysadmin","dateUpdated":"2020-05-31T20:10:48+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213787_1845491645","id":"20200429-231541_612551067","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235322"},{"title":"23 - Create and start a query that produces Kafka messages","text":"%pyspark\n# Note: if you rerun query be sure to clear out checkpoint location directory\nactivationsKafkaQuery = activationsValueDF.writeStream.format(\"kafka\").option(\"checkpointLocation\",\"/tmp/kafka-checkpoint\").option(\"topic\",\"activations-out\").option(\"kafka.bootstrap.servers\",\"localhost:9092\").start()","user":"sysadmin","dateUpdated":"2020-05-31T20:10:59+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213787_54379903","id":"20200429-231945_1868607638","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235323"},{"title":"24 - Confirm that the messages are being received correctly","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213787_-1561623915","id":"20200429-232115_809190101","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235324"},{"title":"25 - Stopping the query","text":"%pyspark\nactivationsKafkaQuery.stop()","user":"sysadmin","dateUpdated":"2020-05-31T20:11:10+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1590955213787_374115592","id":"20200429-232112_1285256751","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235325"},{"text":"%md\nWe hope you've enjoyed this lab. Below are additional resources that you should find useful:\n\n1. [Hortonworks Apache Spark Tutorials](http://hortonworks.com/tutorials/#tuts-developers) are your natural next step where you can explore Spark in more depth.\n2. [Hortonworks Community Connection (HCC)](https://community.hortonworks.com/spaces/85/data-science.html?type=question) is a great resource for questions and answers on Spark, Data Analytics/Science, and many more Big Data topics.\n3. [Hortonworks Apache Spark Docs](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/spark-overview/content/analyzing_data_with_apache_spark.html) - official Spark documentation.\n4. [Hortonworks Apache Zeppelin Docs](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/zeppelin-overview/content/overview.html) - official Zeppelin documentation.\n","user":"sysadmin","dateUpdated":"2020-05-31T20:00:13+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>We hope you've enjoyed this lab. Below are additional resources that you should find useful:</p>\n<ol>\n<li><a href=\"http://hortonworks.com/tutorials/#tuts-developers\">Hortonworks Apache Spark Tutorials</a> are your natural next step where you can explore Spark in more depth.</li>\n<li><a href=\"https://community.hortonworks.com/spaces/85/data-science.html?type=question\">Hortonworks Community Connection (HCC)</a> is a great resource for questions and answers on Spark, Data Analytics/Science, and many more Big Data topics.</li>\n<li><a href=\"https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/spark-overview/content/analyzing_data_with_apache_spark.html\">Hortonworks Apache Spark Docs</a> - official Spark documentation.</li>\n<li><a href=\"https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/zeppelin-overview/content/overview.html\">Hortonworks Apache Zeppelin Docs</a> - official Zeppelin documentation.</li>\n</ol>\n"}]},"apps":[],"jobName":"paragraph_1590955213788_1104878818","id":"20181126-133017_244739700","dateCreated":"2020-05-31T20:00:13+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:235326"}],"name":"PYSPARK/17-WorkingWithApacheKafkaStreamingMessages","id":"2FB52Z8ZE","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"sh:shared_process":[],"jdbc:shared_process":[],"spark2:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}